<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="share.king.dao.TradeRecordEntityMapper">
    <resultMap id="BaseResultMap" type="share.king.entity.TradeRecordEntity">
        <id column="id" jdbcType="INTEGER" property="id"/>
        <result column="name" jdbcType="VARCHAR" property="name"/>
        <result column="alias" jdbcType="VARCHAR" property="alias"/>
        <result column="code" jdbcType="VARCHAR" property="code"/>
        <result column="user_id" jdbcType="INTEGER" property="userId"/>
        <result column="buy_time" jdbcType="TIMESTAMP" property="buyTime"/>
        <result column="buy_price" jdbcType="INTEGER" property="buyPrice"/>
        <result column="buy_count" jdbcType="INTEGER" property="buyCount"/>
        <result column="sell_time" jdbcType="TIMESTAMP" property="sellTime"/>
        <result column="sell_price" jdbcType="INTEGER" property="sellPrice"/>
        <result column="open_price" jdbcType="INTEGER" property="openPrice"/>
        <result column="close_price" jdbcType="INTEGER" property="closePrice"/>
        <result column="high_price" jdbcType="INTEGER" property="highPrice"/>
        <result column="low_price" jdbcType="INTEGER" property="lowPrice"/>
        <result column="remark" jdbcType="VARCHAR" property="remark"/>
        <result column="idea" jdbcType="VARCHAR" property="idea"/>
        <result column="day_trend" jdbcType="VARCHAR" property="dayTrend"/>
        <result column="create_date" jdbcType="TIMESTAMP" property="createDate"/>
    </resultMap>
    <sql id="Example_Where_Clause">
        <where>
            <foreach collection="oredCriteria" item="criteria" separator="or">
                <if test="criteria.valid">
                    <trim prefix="(" prefixOverrides="and" suffix=")">
                        <foreach collection="criteria.criteria" item="criterion">
                            <choose>
                                <when test="criterion.noValue">
                                    and ${criterion.condition}
                                </when>
                                <when test="criterion.singleValue">
                                    and ${criterion.condition} #{criterion.value}
                                </when>
                                <when test="criterion.betweenValue">
                                    and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                                </when>
                                <when test="criterion.listValue">
                                    and ${criterion.condition}
                                    <foreach close=")" collection="criterion.value" item="listItem" open="("
                                             separator=",">
                                        #{listItem}
                                    </foreach>
                                </when>
                            </choose>
                        </foreach>
                    </trim>
                </if>
            </foreach>
        </where>
    </sql>
    <sql id="Base_Column_List">
        id, name, alias, code, user_id, buy_time, buy_price, buy_count, sell_time, sell_price,
    open_price, close_price, high_price, low_price, remark, idea, day_trend, create_date
    </sql>
    <select id="selectByExample" parameterType="share.king.entity.TradeRecordEntityExample" resultMap="BaseResultMap">
        select
        <if test="distinct">
            distinct
        </if>
        'false' as QUERYID,
        <include refid="Base_Column_List"/>
        from trade_record
        <if test="_parameter != null">
            <include refid="Example_Where_Clause"/>
        </if>
        <if test="orderByClause != null">
            order by ${orderByClause}
        </if>
    </select>
    <select id="selectByPrimaryKey" parameterType="java.lang.Integer" resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List"/>
        from trade_record
        where id = #{id,jdbcType=INTEGER}
    </select>
    <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer">
        delete
        from trade_record
        where id = #{id,jdbcType=INTEGER}
    </delete>
    <insert id="insert" parameterType="share.king.entity.TradeRecordEntity">
        insert into trade_record (id, name, alias,
                                  code, user_id, buy_time,
                                  buy_price, buy_count, sell_time,
                                  sell_price, open_price, close_price,
                                  high_price, low_price, remark,
                                  idea, day_trend, create_date)
        values (#{id,jdbcType=INTEGER}, #{name,jdbcType=VARCHAR}, #{alias,jdbcType=VARCHAR},
                #{code,jdbcType=VARCHAR}, #{userId,jdbcType=INTEGER}, #{buyTime,jdbcType=TIMESTAMP},
                #{buyPrice,jdbcType=INTEGER}, #{buyCount,jdbcType=INTEGER}, #{sellTime,jdbcType=TIMESTAMP},
                #{sellPrice,jdbcType=INTEGER}, #{openPrice,jdbcType=INTEGER}, #{closePrice,jdbcType=INTEGER},
                #{highPrice,jdbcType=INTEGER}, #{lowPrice,jdbcType=INTEGER}, #{remark,jdbcType=VARCHAR},
                #{idea,jdbcType=VARCHAR}, #{dayTrend,jdbcType=VARCHAR}, #{createDate,jdbcType=TIMESTAMP})
    </insert>
    <insert id="insertSelective" parameterType="share.king.entity.TradeRecordEntity">
        insert into trade_record
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="id != null">
                id,
            </if>
            <if test="name != null">
                name,
            </if>
            <if test="alias != null">
                alias,
            </if>
            <if test="code != null">
                code,
            </if>
            <if test="userId != null">
                user_id,
            </if>
            <if test="buyTime != null">
                buy_time,
            </if>
            <if test="buyPrice != null">
                buy_price,
            </if>
            <if test="buyCount != null">
                buy_count,
            </if>
            <if test="sellTime != null">
                sell_time,
            </if>
            <if test="sellPrice != null">
                sell_price,
            </if>
            <if test="openPrice != null">
                open_price,
            </if>
            <if test="closePrice != null">
                close_price,
            </if>
            <if test="highPrice != null">
                high_price,
            </if>
            <if test="lowPrice != null">
                low_price,
            </if>
            <if test="remark != null">
                remark,
            </if>
            <if test="idea != null">
                idea,
            </if>
            <if test="dayTrend != null">
                day_trend,
            </if>
            <if test="createDate != null">
                create_date,
            </if>
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="id != null">
                #{id,jdbcType=INTEGER},
            </if>
            <if test="name != null">
                #{name,jdbcType=VARCHAR},
            </if>
            <if test="alias != null">
                #{alias,jdbcType=VARCHAR},
            </if>
            <if test="code != null">
                #{code,jdbcType=VARCHAR},
            </if>
            <if test="userId != null">
                #{userId,jdbcType=INTEGER},
            </if>
            <if test="buyTime != null">
                #{buyTime,jdbcType=TIMESTAMP},
            </if>
            <if test="buyPrice != null">
                #{buyPrice,jdbcType=INTEGER},
            </if>
            <if test="buyCount != null">
                #{buyCount,jdbcType=INTEGER},
            </if>
            <if test="sellTime != null">
                #{sellTime,jdbcType=TIMESTAMP},
            </if>
            <if test="sellPrice != null">
                #{sellPrice,jdbcType=INTEGER},
            </if>
            <if test="openPrice != null">
                #{openPrice,jdbcType=INTEGER},
            </if>
            <if test="closePrice != null">
                #{closePrice,jdbcType=INTEGER},
            </if>
            <if test="highPrice != null">
                #{highPrice,jdbcType=INTEGER},
            </if>
            <if test="lowPrice != null">
                #{lowPrice,jdbcType=INTEGER},
            </if>
            <if test="remark != null">
                #{remark,jdbcType=VARCHAR},
            </if>
            <if test="idea != null">
                #{idea,jdbcType=VARCHAR},
            </if>
            <if test="dayTrend != null">
                #{dayTrend,jdbcType=VARCHAR},
            </if>
            <if test="createDate != null">
                #{createDate,jdbcType=TIMESTAMP},
            </if>
        </trim>
    </insert>
    <update id="updateByPrimaryKeySelective" parameterType="share.king.entity.TradeRecordEntity">
        update trade_record
        <set>
            <if test="name != null">
                name = #{name,jdbcType=VARCHAR},
            </if>
            <if test="alias != null">
                alias = #{alias,jdbcType=VARCHAR},
            </if>
            <if test="code != null">
                code = #{code,jdbcType=VARCHAR},
            </if>
            <if test="userId != null">
                user_id = #{userId,jdbcType=INTEGER},
            </if>
            <if test="buyTime != null">
                buy_time = #{buyTime,jdbcType=TIMESTAMP},
            </if>
            <if test="buyPrice != null">
                buy_price = #{buyPrice,jdbcType=INTEGER},
            </if>
            <if test="buyCount != null">
                buy_count = #{buyCount,jdbcType=INTEGER},
            </if>
            <if test="sellTime != null">
                sell_time = #{sellTime,jdbcType=TIMESTAMP},
            </if>
            <if test="sellPrice != null">
                sell_price = #{sellPrice,jdbcType=INTEGER},
            </if>
            <if test="openPrice != null">
                open_price = #{openPrice,jdbcType=INTEGER},
            </if>
            <if test="closePrice != null">
                close_price = #{closePrice,jdbcType=INTEGER},
            </if>
            <if test="highPrice != null">
                high_price = #{highPrice,jdbcType=INTEGER},
            </if>
            <if test="lowPrice != null">
                low_price = #{lowPrice,jdbcType=INTEGER},
            </if>
            <if test="remark != null">
                remark = #{remark,jdbcType=VARCHAR},
            </if>
            <if test="idea != null">
                idea = #{idea,jdbcType=VARCHAR},
            </if>
            <if test="dayTrend != null">
                day_trend = #{dayTrend,jdbcType=VARCHAR},
            </if>
            <if test="createDate != null">
                create_date = #{createDate,jdbcType=TIMESTAMP},
            </if>
        </set>
        where id = #{id,jdbcType=INTEGER}
    </update>
    <update id="updateByPrimaryKey" parameterType="share.king.entity.TradeRecordEntity">
        update trade_record
        set name        = #{name,jdbcType=VARCHAR},
            alias       = #{alias,jdbcType=VARCHAR},
            code        = #{code,jdbcType=VARCHAR},
            user_id     = #{userId,jdbcType=INTEGER},
            buy_time    = #{buyTime,jdbcType=TIMESTAMP},
            buy_price   = #{buyPrice,jdbcType=INTEGER},
            buy_count   = #{buyCount,jdbcType=INTEGER},
            sell_time   = #{sellTime,jdbcType=TIMESTAMP},
            sell_price  = #{sellPrice,jdbcType=INTEGER},
            open_price  = #{openPrice,jdbcType=INTEGER},
            close_price = #{closePrice,jdbcType=INTEGER},
            high_price  = #{highPrice,jdbcType=INTEGER},
            low_price   = #{lowPrice,jdbcType=INTEGER},
            remark      = #{remark,jdbcType=VARCHAR},
            idea        = #{idea,jdbcType=VARCHAR},
            day_trend   = #{dayTrend,jdbcType=VARCHAR},
            create_date = #{createDate,jdbcType=TIMESTAMP}
        where id = #{id,jdbcType=INTEGER}
    </update>

    <select id="selectAll" resultType="share.king.entity.TradeRecordEntity">
        select *
        from trade_record
    </select>

    <select id="selectByCondition" resultType="share.king.entity.TradeRecordEntity">
        select * from trade_record where 1=1
        <if test="startDate != null">
            and create_date > #{startDate,jdbcType=TIMESTAMP}
        </if>
        <if test="endDate != null">
            and #{endDate,jdbcType=TIMESTAMP} > create_date
        </if>
        <if test="profit != null">
            <choose>
                <when test='profit == "Y"'>
                    and sell_price > buy_price
                </when>
                <when test='profit == "N"'>
                    and sell_price &lt; buy_price
                </when>
                <otherwise>

                </otherwise>
            </choose>
        </if>
        <if test="asc != null">
            <choose>
                <when test='asc == "Y"'>
                    order by create_date asc
                </when>
                <when test='asc == "N"'>
                    order by create_date desc
                </when>
                <otherwise>
                </otherwise>
            </choose>
        </if>
    </select>

    <update id="updateBatch" parameterType="java.util.List">
        <foreach collection="list" item="item" index="index" open="" close="" separator=";">
            update trade_record
            <set>
                <if test="item.name != null">
                    name = #{item.name,jdbcType=VARCHAR},
                </if>
                <if test="item.alias != null">
                    alias = #{item.alias,jdbcType=VARCHAR},
                </if>
                <if test="item.code != null">
                    code = #{item.code,jdbcType=VARCHAR},
                </if>
                <if test="item.userId != null">
                    user_id = #{item.userId,jdbcType=INTEGER},
                </if>
                <if test="item.buyTime != null">
                    buy_time = #{item.buyTime,jdbcType=TIMESTAMP},
                </if>
                <if test="item.buyPrice != null">
                    buy_price = #{item.buyPrice,jdbcType=INTEGER},
                </if>
                <if test="item.buyCount != null">
                    buy_count = #{item.buyCount,jdbcType=INTEGER},
                </if>
                <if test="item.sellTime != null">
                    sell_time = #{item.sellTime,jdbcType=TIMESTAMP},
                </if>
                <if test="item.sellPrice != null">
                    sell_price = #{item.sellPrice,jdbcType=INTEGER},
                </if>
                <if test="item.openPrice != null">
                    open_price = #{item.openPrice,jdbcType=INTEGER},
                </if>
                <if test="item.closePrice != null">
                    close_price = #{item.closePrice,jdbcType=INTEGER},
                </if>
                <if test="item.highPrice != null">
                    high_price = #{item.highPrice,jdbcType=INTEGER},
                </if>
                <if test="item.lowPrice != null">
                    low_price = #{item.lowPrice,jdbcType=INTEGER},
                </if>
                <if test="item.remark != null">
                    remark = #{item.remark,jdbcType=VARCHAR},
                </if>
                <if test="item.idea != null">
                    idea = #{item.idea,jdbcType=VARCHAR},
                </if>
                <if test="item.dayTrend != null">
                    day_trend = #{item.dayTrend,jdbcType=VARCHAR},
                </if>
                <if test="item.createDate != null">
                    create_date = #{item.createDate,jdbcType=TIMESTAMP},
                </if>
            </set>
            where id = #{item.id,jdbcType=INTEGER}
        </foreach>
    </update>
</mapper>